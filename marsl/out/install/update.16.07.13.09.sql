SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

ALTER TABLE `email` 
CHANGE COLUMN `user` `user` INT(11) NULL DEFAULT NULL ,
ADD UNIQUE INDEX `confirm_id_UNIQUE` (`confirm_id` ASC);

CREATE TABLE IF NOT EXISTS `newsletter_configuration` (
  `allow_anon_registration` TINYINT(1) NULL DEFAULT NULL)
ENGINE = MyISAM
DEFAULT CHARACTER SET = latin1;

CREATE TABLE IF NOT EXISTS `newsletter_entry` (
  `confirm_id` CHAR(32) NOT NULL,
  `prename` VARCHAR(50) NULL DEFAULT NULL,
  `name` VARCHAR(50) NULL DEFAULT NULL,
  `role` INT(11) NOT NULL,
  PRIMARY KEY (`confirm_id`, `role`),
  INDEX `newsletter_role_idx` (`role` ASC))
ENGINE = MyISAM
DEFAULT CHARACTER SET = latin1;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
